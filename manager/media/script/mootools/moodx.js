var MooPrompt=box=new Class({setOptions:function(e){this.options={buttons:1,width:300,height:0,maxHeight:500,vertical:"middle",horizontal:"center",delay:0,overlay:true,effect:"grow"};Object.extend(this.options,e||{})},initialize:function(e,t,n){this.setOptions(n);this.title=e;this.text=t;if(this.options.overlay){this.overlay=(new Element("div")).setProperty("class","cbOverlay");this.overlay.setStyles({position:"absolute",top:0,left:0,width:"100%",visibility:"hidden"}).injectInside(document.body)}this.container=(new Element("div")).setProperty("class","cbContainer");this.container.setStyles({position:"absolute",visibility:"hidden"}).injectInside(document.body);this.box=(new Element("div")).setProperty("class","cbBox");this.box.setStyles({width:this.options.width+"px",overflow:"auto"}).injectInside(this.container);if(this.box.getStyle("background-color")==""||this.box.getStyle("background-color")=="transparent"){this.box.setStyle("background-color",this.container.getStyle("background-color"))}this.header=(new Element("h3")).setProperty("class","cbHeader").appendText(this.title).injectInside(this.box);this.content=(new Element("div")).setProperty("class","cbContent").injectInside(this.box);if($type(t)=="element"){t.injectInside(this.content)}else{this.content.appendText(this.text)}this.buttons=(new Element("div")).setProperty("class","cbButtons").injectInside(this.box);if(this.buttons.getStyle("background-color")==""||this.buttons.getStyle("background-color")=="transparent"){this.buttons.setStyle("background-color",this.box.getStyle("background-color"))}for(var r=1;r<=this.options.buttons;r++){if(typeof this.options["button"+r]=="undefined"){this.options["button"+r]="Button"}if($type(this.options["button"+r])=="element"){this["button"+r]=this.options["button"+r];this["button"+r].injectInside(this.buttons)}else{this["button"+r]=(new Element("input")).setProperties({type:"button",value:this.options["button"+r]}).injectInside(this.buttons)}if(typeof this.options["button"+r]=="undefined"){this.options["onButton"+r]=Class.empty}this["button"+r].onclick=this.close.pass([this.options["onButton"+r]],this)}this.boxHeight=this.box.offsetHeight<this.options.maxHeight?this.box.offsetHeight:this.options.maxHeight;this.boxHeight=this.options.height>0?this.options.height:this.boxHeight;this.position();this.eventPosition=this.position.bind(this);window.addEvent("scroll",this.eventPosition).addEvent("resize",this.eventPosition);this.box.setStyle("display","none");if(this.options.overlay){this.fx1=(new Fx.Style(this.overlay,"opacity",{duration:500})).custom(0,.8)}if(this.options.effect=="grow"){this.container.setStyle("top",Window.getScrollTop()+Window.getHeight()/2+"px");var i={};i.height=0;i.width=0;if(this.options.horizontal!="center"){i[this.options.horizontal]=this.options.width/2+"px"}if(this.options.vertical=="top"){i[this.options.vertical]=Window.getScrollTop()+this.boxHeight/2+"px"}else if(this.options.vertical=="bottom"){i.top=Window.getScrollTop()+Window.getHeight()-this.boxHeight/2-25+"px"}this.container.setStyles(i);this.container.setStyle("visibility","");this.fx2=new Fx.Styles(this.container,{duration:500});this.fx2.custom({width:[0,this.options.width],"margin-left":[0,-this.options.width/2],"margin-right":[0,-this.options.width/2],height:[0,this.boxHeight],"margin-top":[0,-this.boxHeight/2],"margin-bottom":[0,-this.boxHeight/2]}).chain(function(){this.box.setStyles({visibility:"hidden",display:"",height:this.boxHeight+"px"});(new Fx.Style(this.box,"opacity",{duration:500})).custom(0,1).chain(function(){if(this.options.delay>0){var e=function(){this.close()}.bind(this).delay(this.options.delay)}}.bind(this))}.bind(this))}else{this.container.setStyles({height:this.boxHeight,width:this.options.width,left:"",visibility:"hidden"});this.box.setStyles({visibility:"",display:"",height:this.boxHeight+"px"});this.fx2=new Fx.Styles(this.container,{duration:500});var s={};if(this.options.horizontal!="center"){s[this.options.horizontal]=[-this.options.width,0]}else{this.container.setStyles({left:"50%","margin-left":-this.options.width/2+"px","margin-right":-this.options.width/2+"px"})}if(this.options.vertical=="top"){s[this.options.vertical]=[Window.getScrollTop()-this.boxHeight,Window.getScrollTop()]}else if(this.options.vertical=="bottom"){s.top=[Window.getScrollTop()+Window.getHeight(),Window.getScrollTop()+Window.getHeight()-this.boxHeight-25]}else{this.container.setStyles({top:Window.getScrollTop()+Window.getHeight()/2+"px","margin-top":-this.boxHeight/2+"px","margin-bottom":-this.boxHeight/2+"px"})}s.opacity=[0,1];this.fx2.custom(s).chain(function(){if(this.options.delay>0){var e=function(){this.close()}.bind(this).delay(this.options.delay)}}.bind(this))}},position:function(){var e=Window.getScrollHeight()>Window.getHeight()?Window.getScrollHeight():Window.getHeight();var t=this.options.effect=="grow"?this.options.width/2:0;var n=this.options.effect=="grow"?this.boxHeight/2:0;if(this.options.overlay){this.overlay.setStyles({height:e+"px"})}switch(this.options.vertical){case"top":this.container.setStyle("top",Window.getScrollTop()+n+"px");break;case"middle":this.container.setStyle("top",Window.getScrollTop()+Window.getHeight()/2+"px");break;case"bottom":this.container.setStyle("top",Window.getScrollTop()+Window.getHeight()-this.boxHeight+n-25+"px");break}if(this.options.horizontal=="center"){this.container.setStyle("left","50%")}else{this.container.setStyle(this.options.horizontal,t+"px")}},close:function(e){for(var t=1;t<=this.options.buttons;t++){this["button"+t].onclick=null}if(this.options.overlay){this.fx1.clearTimer()}this.fx2.clearTimer();if(typeof e=="function"){e()}if(this.options.overlay){(new Fx.Style(this.overlay,"opacity",{duration:250})).custom(.8,0)}(new Fx.Style(this.container,"opacity",{duration:250,onComplete:function(){window.removeEvent("scroll",this.eventPosition).removeEvent("resize",this.eventPosition);if(this.options.overlay){this.overlay.remove()}this.container.remove()}.bind(this)})).custom(1,0)}});MooPrompt.implement(new Chain);var MooFloater=new Class({setOptions:function(e){this.options={width:"200px",height:"30px",position:"top-right",glidespeed:6,offsetx:10,offsety:10};Object.extend(this.options,e||{})},initialize:function(e,t){this.setOptions(t);this.container=e;this.container.setStyle("position","absolute");this.container.setStyle("width",this.options.width);this.container.setStyle("height",this.options.height);position=this.options.position.split("-");switch(position[0]){case"top":this.container.setStyle("top",this.options.offsety+"px");break;case"bottom":this.container.setStyle("bottom",this.options.offsety+"px");break}switch(position[1]){case"left":this.container.setStyle("left",this.options.offsetx+"px");break;case"right":this.container.setStyle("right",this.options.offsetx+"px");break}this.floater=this.startFloat.bind(this).delay(100,window);window.addEvent("scroll",this.onScrollHandler.bind(this));window.addEvent("resize",this.onScrollHandler.bind(this))},onScrollHandler:function(){if(this.floater==null){this.floater=this.startFloat.bind(this).delay(100,window)}else{this.floater=$clear(this.floater);this.floater=null;this.floater=this.startFloat.bind(this).delay(100,window)}},startFloat:function(){glidespeed=this.options.glidespeed*100;position=this.options.position.split("-");switch(position[0]){case"top":var e=new Fx.Style(this.container,"top",{duration:glidespeed});e.custom(this.container.getStyle("top").toInt(),Window.getScrollTop()+this.options.offsety);break;case"bottom":var t=new Fx.Style(this.container,"bottom",{duration:glidespeed});t.custom(this.container.getStyle("bottom").toInt(),-Window.getScrollTop()+this.options.offsety);break}switch(position[1]){case"left":var n=new Fx.Style(this.container,"left",{duration:glidespeed});n.custom(this.container.getStyle("left").toInt(),Window.getScrollLeft()+this.options.offsetx);break;case"right":var r=new Fx.Style(this.container,"right",{duration:glidespeed});r.custom(this.container.getStyle("right").toInt(),-Window.getScrollLeft()+this.options.offsetx);break}}});MooFloater.implement(new Chain);var MooMarquee=new Class({setOptions:function(e){this.options={width:"",height:"",speed:3,modifier:90,mousepause:"Yes",direction:"Vertical"};Object.extend(this.options,e||{})},initialize:function(e,t){this.setOptions(t);this.scrollingContainer=e;this.scrollingContent=this.scrollingContainer.getFirst();this.direction=this.options.direction=="Vertical"?"top":"left";this.scrollingContainer.setStyle("width",this.options.width);this.scrollingContainer.setStyle("height",this.options.height);this.scrollingContainer.setStyle("position","relative");this.scrollingContainer.setStyle("overflow","hidden");this.scrollingContent.setStyle("position","relative");this.scrollingContent.setStyle(this.direction,"0px");if(this.options.mousepause=="Yes"){this.scrollingContainer.addEvent("mouseover",function(){this.stopSliding()}.bind(this));this.scrollingContainer.addEvent("mouseout",function(){this.restartSliding()}.bind(this))}this.objRef=this.scrollingContent;this.contentSize=this.direction=="top"?this.scrollingContent.offsetHeight:this.scrollingContent.offsetWidth;this.containerSize=this.direction=="top"?this.scrollingContainer.clientHeight:this.scrollingContainer.clientWidth;this.slideSpeed=this.options.speed;this.origSlideSpeed=this.slideSpeed;this.slideContent()},slideContent:function(){var e=this.scrollingContent.getStyle(this.direction).toInt();var t=e;e=e-this.slideSpeed;if(e/1+this.contentSize/1<0){e=this.containerSize}this.scrollingContent.setStyle(this.direction,e+"px");setTimeout(this.slideContent.bind(this),this.options.modifier)},stopSliding:function(){this.slideSpeed=0},restartSliding:function(){this.slideSpeed=this.origSlideSpeed}});MooMarquee.implement(new Chain)